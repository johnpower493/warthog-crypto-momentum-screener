:root{
  /* Base colors */
  --bg:#0b0f14;
  --bg-secondary:#0f1520;
  --panel:#111823;
  --muted:#7d8aa5;
  --text:#e6edf3;
  --accent:#4cc9f0;
  --border:#1f2a37;
  --row:#0f1520;
  
  /* Semantic colors - Price movement */
  --up:#10b981;           /* Green for gains/bullish */
  --down:#ef4444;         /* Red for losses/bearish */
  --up-bright:#22c55e;    /* Brighter green for emphasis */
  --down-bright:#f87171;  /* Brighter red for emphasis */
  
  /* Semantic colors - Indicator states */
  --overbought:#e76f51;   /* Orange-red for overbought (RSI>70, Stoch>80) */
  --oversold:#2a9d8f;     /* Teal for oversold (RSI<30, Stoch<20) */
  --neutral:#6b7280;      /* Gray for neutral states */
  
  /* Semantic colors - Signal grades */
  --grade-a:#10b981;      /* Green for A grade */
  --grade-b:#f59e0b;      /* Amber for B grade */
  --grade-c:#ef4444;      /* Red for C grade */
  
  /* Semantic colors - Status */
  --status-connected:#10b981;
  --status-reconnecting:#f59e0b;
  --status-disconnected:#ef4444;
}
*{box-sizing:border-box}
html,body,#__next{height:100%}
body{
  margin:0; background:var(--bg); color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}
a{color:inherit}
.container{max-width:100%;margin:0 auto;padding:16px}
.panel{background:var(--panel);border:1px solid var(--border);border-radius:12px;}
.toolbar{display:flex;gap:12px;align-items:center;justify-content:space-between;padding:12px;border-bottom:1px solid var(--border);flex-wrap:wrap}
.group{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.input{background:#0b1220;border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:10px;min-width:240px;outline:none;max-width:100%}
.select{background:#0b1220;border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:10px}
.badge{padding:6px 10px;border-radius:9999px;border:1px solid var(--border);color:var(--muted)}
.button{background:linear-gradient(180deg,#1b2635,#111826);border:1px solid var(--border);color:var(--text);padding:10px 12px;border-radius:10px;cursor:pointer;white-space:nowrap}
.button:hover{border-color:#2a3a50}
.buttonActive{border-color:rgba(76,201,240,.7);box-shadow:0 0 0 1px rgba(76,201,240,.25) inset}
.tableWrap{overflow:auto}
.table{width:100%;border-collapse:separate;border-spacing:0}
.table thead th{position:sticky;top:0;background:var(--panel); z-index:1; text-align:left;padding:12px;border-bottom:1px solid var(--border);font-weight:600;font-size:12px;color:var(--muted)}
.table thead th.sortable{cursor:pointer;user-select:none}
.table thead th.sortable:hover{color:var(--text);background:#151d2b}
.table tbody td{padding:12px;border-bottom:1px solid var(--border);}

/* Responsive table column collapsing */
@media (max-width: 980px){
  .hide-md{display:none}
}
@media (max-width: 720px){
  .hide-sm{display:none}
  .container{padding:10px}
  .toolbar{gap:10px}
  .input{min-width:160px}
  .table thead th{padding:10px;font-size:11px}
  .table tbody td{padding:10px;font-size:12px}
  .footer{flex-direction:column;align-items:flex-start}
}
@media (max-width: 520px){
  .hide-xs{display:none}
  .table thead th{padding:8px;font-size:11px}
  .table tbody td{padding:8px;font-size:12px}
}
.table tbody tr{background:var(--row)}
.table tbody tr:hover{background:#0e1a2b}
.kpi{display:flex;gap:12px;align-items:center}
.kpi .value{font-size:20px;font-weight:700}
.kpi .label{font-size:12px;color:var(--muted)}
.grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));}
.card{background:linear-gradient(180deg,#101825,#0c131e);border:1px solid var(--border);border-radius:12px;padding:12px;transition:transform 0.15s ease, box-shadow 0.15s ease}
.card:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,0.3)}
.card-static{transition:none}
.card-static:hover{transform:none;box-shadow:none}

/* Details modal + mobile bottom sheet */
.modalOverlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 9999;
  /* symmetrical padding + safe-area */
  padding: max(12px, env(safe-area-inset-top)) max(12px, env(safe-area-inset-right)) max(12px, env(safe-area-inset-bottom)) max(12px, env(safe-area-inset-left));
  height: 100dvh;
}

.modalSheet{
  width: 720px;
  max-width: 95vw;
  max-height: calc(100dvh - 24px);
  overflow: auto;
  position: relative;
}

.modalHandle{display:none;}

.chartsGrid{grid-template-columns: repeat(2, minmax(0, 1fr)) !important;}


@media (max-width: 720px){
  .detailsGrid{grid-template-columns: 1fr !important;}
  .chartsGrid{grid-template-columns: 1fr !important;}
  .modalOverlay{
    align-items: flex-end;
    justify-content: center;
    padding: max(10px, env(safe-area-inset-top)) max(10px, env(safe-area-inset-right)) max(10px, env(safe-area-inset-bottom)) max(10px, env(safe-area-inset-left));
  }
  .modalSheet{
    width: 100%;
    max-width: 100%;
    max-height: calc(100dvh - 20px);
    border-radius: 16px 16px 0 0;
  }
  .modalHandle{
    display: block;
    position: absolute;
    left: 50%;
    top: 10px;
    transform: translateX(-50%);
    width: 46px;
    height: 5px;
    border-radius: 999px;
    background: rgba(255,255,255,0.18);
  }
}

.card h3{margin:0 0 8px 0;font-size:13px;color:var(--muted);font-weight:600}
.pill{display:inline-flex;gap:8px;align-items:baseline;background:#0b1220;border:1px solid var(--border);border-radius:9999px;padding:6px 10px;margin:4px 6px 0 0}
.pill .sym{font-weight:600}
.pill .val{font-size:12px;color:var(--muted)}
.chgUp{color:var(--up);}
.chgDown{color:var(--down);}
.muted{color:var(--muted)}

/* Semantic color utilities - use these instead of hardcoded hex values */
.text-up{color:var(--up)}
.text-down{color:var(--down)}
.text-overbought{color:var(--overbought)}
.text-oversold{color:var(--oversold)}
.text-neutral{color:var(--neutral)}
.text-grade-a{color:var(--grade-a)}
.text-grade-b{color:var(--grade-b)}
.text-grade-c{color:var(--grade-c)}
.bg-up{background:var(--up)}
.bg-down{background:var(--down)}
.bg-overbought{background:var(--overbought)}
.bg-oversold{background:var(--oversold)}

/* Hide scrollbar utility */
.hide-scrollbar::-webkit-scrollbar{display:none}

/* Toast notifications */
.toast{position:fixed;bottom:80px;left:50%;transform:translateX(-50%);padding:12px 20px;border-radius:8px;font-weight:600;font-size:14px;z-index:10000;animation:slideUp 0.3s ease;box-shadow:0 4px 12px rgba(0,0,0,0.3)}
.toast-error{background:#ef4444;color:#fff}
.toast-success{background:#10b981;color:#fff}
.toast-info{background:#3b82f6;color:#fff}
@keyframes slideUp{from{opacity:0;transform:translateX(-50%) translateY(20px)}to{opacity:1;transform:translateX(-50%) translateY(0)}}

/* Skeleton loader animation */
.skeleton-loader{background:linear-gradient(90deg,#1a1a2e 25%,#252540 50%,#1a1a2e 75%);background-size:200% 100%;animation:skeleton 1.5s infinite;border-radius:4px}
@keyframes skeleton{0%{background-position:200% 0}100%{background-position:-200% 0}}
.momentumStrong{color:var(--up);font-weight:600}
.momentumWeak{color:var(--down);font-weight:600}
.signalStrongBull{color:var(--up-bright);font-weight:700;font-size:14px}
.signalBull{color:var(--up);font-weight:600}
.signalBear{color:var(--down);font-weight:600}
.signalStrongBear{color:var(--down-bright);font-weight:700;font-size:14px}
.footer{padding:10px;border-top:1px solid var(--border);display:flex;gap:10px;justify-content:space-between;color:var(--muted)}
.star{cursor:pointer;opacity:.6}
.star.active{opacity:1;color:gold}

/* Reconnection Banner */
.reconnect-banner {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 9999;
  background: linear-gradient(90deg, var(--status-reconnecting) 0%, #d97706 100%);
  color: #000;
  padding: 10px 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  font-weight: 600;
  font-size: 14px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.3);
  flex-wrap: wrap;
}

.reconnect-banner.disconnected {
  background: linear-gradient(90deg, var(--status-disconnected) 0%, #dc2626 100%);
}

.reconnect-icon {
  animation: pulse 1.5s infinite;
}

.reconnect-hint {
  font-size: 12px;
  opacity: 0.8;
}

.reconnect-actions {
  display: flex;
  gap: 8px;
  align-items: center;
}

.reconnect-btn {
  background: rgba(0,0,0,0.2);
  border: 1px solid rgba(0,0,0,0.3);
  color: #000;
  padding: 4px 12px;
  border-radius: 6px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.2s;
}

.reconnect-btn:hover {
  background: rgba(0,0,0,0.3);
}

.reconnect-tips {
  width: 100%;
  margin-top: 6px;
  font-size: 11px;
  font-weight: 400;
  opacity: 0.9;
  text-align: center;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

/* Collapsible Sections */
.collapsible-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  cursor: pointer;
  padding: 8px 0;
  user-select: none;
  border-radius: 6px;
  transition: background 0.15s;
}

.collapsible-header:hover {
  background: rgba(255,255,255,0.03);
}

.collapsible-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 12px;
  font-weight: 600;
  color: var(--muted);
}

.collapsible-toggle {
  font-size: 10px;
  color: var(--muted);
  transition: transform 0.2s;
}

.collapsible-toggle.expanded {
  transform: rotate(180deg);
}

.collapsible-content {
  overflow: hidden;
  transition: max-height 0.3s ease, opacity 0.2s ease;
}

.collapsible-content.collapsed {
  max-height: 0;
  opacity: 0;
}

.collapsible-content.expanded {
  max-height: 2000px;
  opacity: 1;
}

/* Skeleton Loader */
.skeleton-loader {
  background: linear-gradient(90deg, #1a1a2e 25%, #252542 50%, #1a1a2e 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
  margin-bottom: 8px;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* Toast Notifications */
.toast {
  position: fixed;
  bottom: 24px;
  right: 24px;
  color: #fff;
  padding: 12px 20px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  z-index: 10001;
  animation: slideIn 0.3s ease;
  font-weight: 500;
}

.toast-success { background: #10b981; }
.toast-error { background: #ef4444; }
.toast-info { background: #3b82f6; }

@keyframes slideIn {
  from {
    transform: translateY(100px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Desktop Header Navigation */
.desktop-header {
  display: flex;
}

/* Mobile Navigation */
.mobile-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: linear-gradient(to top, rgba(10,10,20,0.98) 0%, rgba(10,10,20,0.95) 100%);
  border-top: 1px solid rgba(255,255,255,0.1);
  display: none;
  justify-content: space-around;
  align-items: center;
  padding: 8px 0 max(12px, env(safe-area-inset-bottom));
  z-index: 9998;
  backdrop-filter: blur(10px);
}

.mobile-nav a,
.mobile-nav button {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-decoration: none;
  color: #888;
  font-size: 10px;
  font-weight: 600;
  gap: 2px;
  transition: color 0.2s;
  background: none;
  border: none;
  cursor: pointer;
  padding: 4px 8px;
}

.mobile-nav a:hover, .mobile-nav a.active,
.mobile-nav button:hover, .mobile-nav button.active {
  color: #4cc9f0;
}

.mobile-nav a span.icon,
.mobile-nav button span.icon {
  font-size: 20px;
  position: relative;
}

/* Nav badge for counts */
.nav-badge {
  position: absolute;
  top: -6px;
  right: -10px;
  background: #ef4444;
  color: #fff;
  font-size: 9px;
  font-weight: 700;
  min-width: 16px;
  height: 16px;
  border-radius: 8px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 4px;
}

.nav-badge-small {
  width: 8px;
  height: 8px;
  min-width: 8px;
  padding: 0;
  top: -2px;
  right: -4px;
}

@media (max-width: 768px) {
  /* Hide desktop header on mobile */
  .desktop-header {
    display: none !important;
  }
  
  .mobile-nav {
    display: flex !important;
  }
  
  .container {
    padding-bottom: 75px !important;
  }
  
  .toolbar a[href="/alerts"],
  .toolbar a[href="/portfolio"],
  .toolbar a[href="/feed"],
  .toolbar a[href="/analysis"],
  .toolbar a[href="/about"] {
    display: none !important;
  }
  
  .toolbar .button {
    padding: 6px 10px !important;
    font-size: 11px !important;
  }
}
